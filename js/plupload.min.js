(function(){var f=0,c=[],g={},a={},h;function e(){this.returnValue=false}function b(){this.cancelBubble=true}(function(j){var k=j.split(/,/),l,n,m;for(l=0;l<k.length;l+=2){m=k[l+1].split(/ /);for(n=0;n<m.length;n++){a[m[n]]=k[l]}}})("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats,docx pptx xlsx,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/html,htm html xhtml,text/rtf,rtf,video/mpeg,mpeg mpg mpe,video/quicktime,qt mov,video/x-flv,flv,video/vnd.rn-realvideo,rv,text/plain,asc txt text diff log,application/octet-stream,exe");var d={STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,mimeTypes:a,extend:function(m){var k,l,j;for(j=1;j<arguments.length;j++){l=arguments[j];for(k in l){m[k]=l[k]}}return m},cleanName:function(j){var k,l;l=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(k=0;k<l.length;k+=2){j=j.replace(l[k],l[k+1])}j=j.replace(/\s+/g,"_");j=j.replace(/[^a-z0-9_\-\.]+/gi,"");return j},addRuntime:function(i,j){j.name=i;c[i]=j;c.push(j);return j},guid:function(){var j=new Date().getTime().toString(32),k;for(k=0;k<5;k++){j+=Math.floor(Math.random()*65535+f).toString(32)}return j},formatSize:function(i){if(i>1048576){return Math.round(i/1048576,1)+" MB"}if(i>1024){return Math.round(i/1024,1)+" KB"}return i+" b"},getPos:function(l,j){var i=0,m=0,k;l=l;j=j||document.body;k=l;while(k&&k!=j&&k.nodeType){i+=k.offsetLeft||0;m+=k.offsetTop||0;k=k.offsetParent}k=l.parentNode;while(k&&k!=j&&k.nodeType){i-=k.scrollLeft||0;m-=k.scrollTop||0;k=k.parentNode}return{x:i,y:m}},parseSize:function(i){var j;if(typeof(i)=="string"){i=/^([0-9]+)([mgk]+)$/.exec(i.toLowerCase().replace(/[^0-9mkg]/g,""));j=i[2];i=parseInt(i[1]);if(j=="g"){i*=1073741824}if(j=="m"){i*=1048576}if(j=="k"){i*=1024}}return i},xmlEncode:function(k){var j={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},i=/[<>&\"\']/g;return(this.xmlEncode=function(l){return l?(""+l).replace(i,function(m){return j[m]?"&"+j[m]+";":m}):l})(k)},toArray:function(l){var k,j=[];for(k=0;k<l.length;k++){j[k]=l[k]}return j},addI18n:function(i){return plipload.extend(g,i)},translate:function(i){return g[i]||i},addEvent:function(j,i,k){if(j.attachEvent){j.attachEvent("on"+i,function(){var l=window.event;if(!l.target){l.target=l.srcElement}l.preventDefault=e;l.stopPropagation=b;k(l)})}else{if(j.addEventListener){j.addEventListener(i,k,false)}}}};d.Uploader=function(k){var j={},n,m=[],o;n=new d.QueueProgress();k=d.extend({chunk_size:"1mb",max_file_size:"1gb",multi_selection:true,image_quality:90,filters:[{title:"Image files",extensions:"jpg,gif,png"}]},k);function l(){var p;if(this.state==d.STARTED&&o<m.length){p=m[o++];if(p.status==d.QUEUED){this.trigger("UploadFile",p)}else{l.call(this)}}else{this.stop()}}function i(){var p;n.reset();for(p=0;p<m.length;p++){n.size+=m[p].size;n.loaded+=m[p].loaded;if(m[p].status==d.DONE){n.uploaded++}else{if(m[p].status==d.FAILED){n.failed++}else{n.queued++}}}n.percent=n.size>0?Math.ceil(n.loaded/n.size*100):0}d.extend(this,{state:d.STOPPED,features:{},files:m,settings:k,total:n,id:d.guid(),init:function(){var u=this,v,r,q,t=0,s;k.page_url=k.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/");if(!/^(\w+:\/\/|\/)/.test(k.url)){k.url=k.page_url+k.url}k.chunk_size=d.parseSize(k.chunk_size);k.max_file_size=d.parseSize(k.max_file_size);u.bind("FilesAdded",function(w,z){var y,x;for(y=0;y<z.length;y++){x=z[y];x.loaded=0;x.percent=0;if(z[y].size>k.max_file_size){x.status=d.FAILED}else{x.status=d.QUEUED}m.push(x)}u.trigger("QueueChanged");u.refresh()});u.bind("UploadProgress",function(w,x){if(x.status==d.QUEUED){x.status=d.UPLOADING}x.percent=x.size>0?Math.ceil(x.loaded/x.size*100):0;i()});u.bind("QueueChanged",i);u.bind("FileUploaded",function(w,x){x.status=d.DONE;w.trigger("UploadProgress",x);l.call(u)});if(k.runtimes){r=[];s=k.runtimes.split(/,/);for(v=0;v<s.length;v++){r.push(c[s[v]])}}else{r=c}function p(){var w=r[t++];if(w){w.init(u,function(x){if(x&&x.success){u.trigger("Init",{runtime:w.name});u.trigger("PostInit");u.refresh()}else{p()}})}}p()},refresh:function(){this.trigger("Refresh")},start:function(){if(this.state!=d.STARTED){o=0;this.state=d.STARTED;this.trigger("StateChanged");l.call(this)}},stop:function(){if(this.state!=d.STOPPED){this.state=d.STOPPED;this.trigger("StateChanged")}},getFile:function(q){var p;for(p=m.length-1;p>=0;p--){if(m[p].id===q){return m[p]}}},removeFile:function(q){var p;for(p=m.length-1;p>=0;p--){if(m[p].id===q.id){return this.splice(p,1)[0]}}},splice:function(r,p){var q;q=m.splice(r,p);this.trigger("FilesRemoved",q);this.trigger("QueueChanged");return q},trigger:function(q){var s=j[q.toLowerCase()],r,p;if(s){p=Array.prototype.slice.call(arguments);p[0]=this;for(r=0;r<s.length;r++){if(s[r].func.apply(s[r].scope,p)===false){return false}}}return true},bind:function(p,r,q){var s;p=p.toLowerCase();s=j[p]||[];s.push({func:r,scope:q||this});j[p]=s},unbind:function(p,r){var s=j[p.toLowerCase()],q;if(s){for(q=s.length-1;q>=0;q--){if(s[q].func===r){s.splice(q,1)}}}}})};d.File=function(l,j,k){var i=this;i.id=l;i.name=j;i.size=k;i.loaded=0;i.percent=0;i.status=0};d.Runtime=function(){this.init=function(i,j){}};d.QueueProgress=function(){var i=this;i.size=0;i.loaded=0;i.uploaded=0;i.failed=0;i.queued=0;i.percent=0;i.reset=function(){i.size=i.loaded=i.uploaded=i.failed=i.queued=i.percent=0}};d.runtimes={};window.plupload=d})();